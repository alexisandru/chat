{"version":3,"sources":["firebase.js","Login.js","ShowPosts.js","CreatePost.js","App.js","index.js"],"names":["fb","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","googleSign","GoogleAuthProvider","date","Timestamp","Login","props","Container","onClick","signInWithPopup","then","result","collection","doc","user","uid","set","user_id","displayName","email","console","log","currentUser","styled","div","ShowPosts","useState","posts","setPosts","useEffect","a","alias","orderBy","onSnapshot","docChanges","forEach","data","j","postss","cons","prev","name","post","error","getPosts","postAll","get","res","aa","todos","map","da","Post","User","Content","label","CreatePost","time","setPost","Input","type","onChange","e","fromDate","Date","toDate","target","value","input","App","session","setSession","setUser","onAuthStateChanged","addUserData","signOut","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8c568290.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\n// Your web app's Firebase configuration\r\n  var firebaseConfig = {\r\n    apiKey: \"AIzaSyCRdKa-IOyqWg8p36U_lxvbm3UtJlOfFY4\",\r\n    authDomain: \"fb-react-af077.firebaseapp.com\",\r\n    projectId: \"fb-react-af077\",\r\n    storageBucket: \"fb-react-af077.appspot.com\",\r\n    messagingSenderId: \"352374886720\",\r\n    appId: \"1:352374886720:web:866e47698ac06b9abfeaa5\"\r\n  };\r\n  // Initialize Firebase\r\nconst fb = firebase.initializeApp(firebaseConfig);\r\n\r\nexport const db = fb.firestore()\r\nexport const auth = fb.auth()\r\n\r\nexport const googleSign = new firebase.auth.GoogleAuthProvider()\r\nexport const date = firebase.firestore.Timestamp;","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport {db, auth, googleSign} from './firebase';\r\n\r\n\r\nconst Login = (props) => {\r\n\r\n     \r\n\r\n  const googleSignIn = () => {\r\n    auth.signInWithPopup(googleSign)\r\n      .then(result => {\r\n        db.collection(\"users\").doc(result.user.uid).set({\r\n          user_id: result.user.uid,\r\n          displayName: result.user.displayName,\r\n          email: result.user.email,\r\n        })\r\n      })\r\n  }\r\n\r\n\r\n  return (\r\n    <Container>\r\n      <button onClick={() => googleSignIn()}>Sign In with Google</button>\r\n      <button onClick={() => console.log(auth.currentUser.uid)}>check</button>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Login\r\n\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n`\r\n ","import React, {useState, useEffect} from 'react'\r\nimport {db} from './firebase'\r\nimport styled from 'styled-components'\r\n\r\nconst ShowPosts = () => {\r\n\r\n  const [posts, setPosts] = useState([])\r\n\r\n  useEffect(() => {\r\n    const getPosts = async () => {\r\n\r\n    const alias = db.collection(\"posts\").orderBy(\"time\")\r\n   \r\n    await alias.onSnapshot(\r\n      async result => {\r\n        let changes = result.docChanges()\r\n\r\n        changes.forEach(async data => {\r\n          const j = data.doc.data()\r\n          let cons = await postss(j.user_id)\r\n          \r\n          setPosts(prev => [{name: cons, post: j.post, uid: j.user_id}, ...prev])  \r\n          \r\n        })\r\n\r\n      }, \r\n      (error) => console.log(error))\r\n  }\r\n    getPosts()\r\n  }, [])\r\n\r\n  \r\n \r\n\r\n  const postss = async (postAll) => {\r\n      let name\r\n      await db.collection(\"users\").doc(postAll).get()\r\n        .then(res => {\r\n          let aa = res.data()\r\n          name = aa.displayName\r\n          //console.log(name)\r\n        })\r\n      return name\r\n  }\r\n  \r\n  \r\n  const todos = posts.map(da => {\r\n    return (\r\n      <Post>\r\n        <User>{da.name}</User>\r\n        <Content>{da.post}</Content>\r\n      </Post>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <Container>\r\n      \r\n      {\r\n        posts !== [] ? todos : \"No\"\r\n      }\r\n      \r\n    </Container>\r\n      \r\n  )\r\n}\r\n\r\nexport default ShowPosts\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  //justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`\r\n\r\nconst Post = styled.div`\r\n  border: 1px solid #000;\r\n  width: 40%;\r\n  margin-top: 20px; \r\n  padding: 15px;\r\n\r\n  @media screen and (max-width: 600px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst User = styled.label`\r\n  font-weight: 600;\r\n`\r\n\r\nconst Content = styled.div`\r\n  font-size: 0.9em;\r\n  padding-top: 5px;\r\n`","import React, { useState } from 'react'\r\nimport {auth, date, db}  from './firebase'\r\nimport styled from 'styled-components'\r\n\r\nconst CreatePost = () => {\r\n\r\n  const user = auth.currentUser\r\n\r\n  const [post, setPost] = useState({\r\n    user_id: user.uid,\r\n    time: \"\",\r\n    post: \"\",\r\n  })\r\n\r\n  const updatePost = (e) => {\r\n    setPost({\r\n      ...post,\r\n      time: date.fromDate(new Date()).toDate(),\r\n      post: e.target.value\r\n    })\r\n\r\n  }\r\n\r\n  const sendPost = () => {\r\n    db.collection(\"posts\").doc().set(post);\r\n\r\n    setPost({\r\n      user_id: user.uid,\r\n      time: \"\",\r\n      post: \"\",\r\n    })\r\n  }\r\n\r\n  \r\n  return (\r\n    <Container>\r\n      <Input type=\"text\" onChange={updatePost} value={post.post}/>\r\n      <button onClick={sendPost}>Post</button>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default CreatePost\r\n\r\nconst Container = styled.div`\r\n  border: 1px solid #000000;\r\n  align-self: center;\r\n  width: 40%;\r\n  margin-top: 20px;\r\n  padding: 10px;\r\n\r\n  @media screen and (max-width: 600px) {\r\n    width: 90%;\r\n  }\r\n`\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n`","import React, { useState, useEffect } from 'react';\nimport {auth} from './firebase';\n\nimport styled from 'styled-components'\n\nimport Login from './Login'\nimport ShowPosts from './ShowPosts'\nimport CreatePost from './CreatePost.js'\n\nfunction App() {\n  \n  const [session, setSession] = useState()\n  const [user, setUser] = useState({\n    name: \"\",\n    uid: \"\",\n    email: \"\",\n  })\n\n  useEffect(() => {\n    auth.onAuthStateChanged(user => {\n      user ? addUserData(user) : setSession(false);\n    })   \n  }, [])\n\n  const addUserData = (user) => {\n    setUser({\n      name: user.displayName,\n      uid: user.uid,\n      email: user.email,\n    })\n    setSession(true)\n  }\n\n\n\n/*\n  useEffect(() => {\n    if(session === true) {\n      getPosts()\n    } else {\n      console.log(\"No\")\n    }\n  }, [session])\n\n  const getPosts = async () => {\n    const posts = await db.collection(\"posts\").where(\"user_id\", \"==\", auth.currentUser.uid).get()\n\n    if(posts) {\n      console.log(\"Si hay notas\")\n      posts.forEach(doc => {\n        \n        let pos = doc.data()\n        console.log(pos.user_id, pos.post)\n      })\n    } else {\n      console.log(\"no\")\n    }\n\n  }\n*/\n \n  \n  \n\n  // const sendNote = () => {\n  //   db.collection(\"note\").doc().set(note);\n  //   setNote({note: \"\"})\n  // }\n  \n  // const showNotes = async () => {\n  //   const things = await db.collection(\"note\").get()\n  //   console.log(things)\n  //   things.forEach(doc => {\n  //     console.log(doc.data())\n  //   })\n  // }\n\n  const logout = () => {\n    auth.signOut()\n      .then(() => console.log(\"logout\"))\n  }\n\n  \n  return (\n    <Container>\n      {\n        session \n        ? <>\n            <button onClick={logout}>logout</button>\n            <CreatePost /> \n            <ShowPosts /> \n          </>\n        : <Login/>\n      }\n      \n    </Container>\n  );\n}\n\nexport default App;\n\nconst Container = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nimport './firebase'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}