(this["webpackJsonpfirebase-test"]=this["webpackJsonpfirebase-test"]||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var a,c,r,i,o,s,u,d,p=n(3),l=n(24),f=n.n(l),b=n(8),j=n(11),h=n(17),O=(n(39),n(33),h.a.initializeApp({apiKey:"AIzaSyCRdKa-IOyqWg8p36U_lxvbm3UtJlOfFY4",authDomain:"fb-react-af077.firebaseapp.com",projectId:"fb-react-af077",storageBucket:"fb-react-af077.appspot.com",messagingSenderId:"352374886720",appId:"1:352374886720:web:866e47698ac06b9abfeaa5"})),m=O.firestore(),x=O.auth(),g=new h.a.auth.GoogleAuthProvider,v=h.a.firestore.Timestamp,w=n(9),y=n(4),k=function(e){return Object(y.jsxs)(S,{children:[Object(y.jsx)("button",{onClick:function(){x.signInWithPopup(g).then((function(e){m.collection("users").doc(e.user.uid).set({user_id:e.user.uid,displayName:e.user.displayName,email:e.user.email})}))},children:"Sign In with Google"}),Object(y.jsx)("button",{onClick:function(){return console.log(x.currentUser.uid)},children:"check"})]})},S=w.a.div(a||(a=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]))),C=n(10),I=n.n(C),_=n(28),N=n(14),A=function(){var e=Object(p.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1];Object(p.useEffect)((function(){(function(){var e=Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.collection("posts").orderBy("time"),e.next=3,t.onSnapshot(function(){var e=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.docChanges().forEach(function(){var e=Object(N.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doc.data(),e.next=3,c(n.user_id);case 3:r=e.sent,a((function(e){return[{name:r,post:n.post,uid:n.user_id}].concat(Object(_.a)(e))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("users").doc(t).get().then((function(e){var t=e.data();n=t.displayName}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=n.map((function(e){return Object(y.jsxs)(E,{children:[Object(y.jsx)(U,{children:e.name}),Object(y.jsx)(z,{children:e.post})]})}));return Object(y.jsx)(D,{children:n!==[]?r:"No"})},D=w.a.div(c||(c=Object(b.a)(["\n  display: flex;\n  //justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),E=w.a.div(r||(r=Object(b.a)(["\n  border: 1px solid #000;\n  width: 40%;\n  margin-top: 20px; \n  padding: 15px;\n\n  @media screen and (max-width: 600px) {\n    width: 100%;\n  }\n"]))),U=w.a.label(i||(i=Object(b.a)(["\n  font-weight: 600;\n"]))),z=w.a.div(o||(o=Object(b.a)(["\n  font-size: 0.9em;\n  padding-top: 5px;\n"]))),B=n(22),J=function(){var e=x.currentUser,t=Object(p.useState)({user_id:e.uid,time:"",post:""}),n=Object(j.a)(t,2),a=n[0],c=n[1];return Object(y.jsxs)(P,{children:[Object(y.jsx)(F,{type:"text",onChange:function(e){c(Object(B.a)(Object(B.a)({},a),{},{time:v.fromDate(new Date).toDate(),post:e.target.value}))},value:a.post}),Object(y.jsx)("button",{onClick:function(){m.collection("posts").doc().set(a),c({user_id:e.uid,time:"",post:""})},children:"Post"})]})},P=w.a.div(s||(s=Object(b.a)(["\n  border: 1px solid #000000;\n  align-self: center;\n  width: 40%;\n  margin-top: 20px;\n  padding: 10px;\n\n  @media screen and (max-width: 600px) {\n    width: 90%;\n  }\n"]))),F=w.a.input(u||(u=Object(b.a)(["\n  width: 100%;\n"])));var G=function(){var e=Object(p.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(p.useState)({name:"",uid:"",email:""}),r=Object(j.a)(c,2),i=(r[0],r[1]);Object(p.useEffect)((function(){x.onAuthStateChanged((function(e){e?o(e):a(!1)}))}),[]);var o=function(e){i({name:e.displayName,uid:e.uid,email:e.email}),a(!0)};return Object(y.jsx)(K,{children:n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{onClick:function(){x.signOut().then((function(){return console.log("logout")}))},children:"logout"}),Object(y.jsx)(J,{}),Object(y.jsx)(A,{})]}):Object(y.jsx)(k,{})})},K=w.a.div(d||(d=Object(b.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"])));f.a.render(Object(y.jsx)(G,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.8c568290.chunk.js.map